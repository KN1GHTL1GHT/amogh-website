@import url('https://fonts.googleapis.com/css2?family=Asimovian&display=swap');

//Color Variables
$hoverColor: #31E981;
$contentColor: #f6f3e4;
$contentHoverColor: #00120B;
$primaryFaceColor: #2F6C61;
$secondaryFaceColor: #35605A;
//#6B818C

// Cube 3D Variables
$cubeDepth: 30px; // translateZ for all cube faces
$cubeRotationX: -20deg; // Default X-axis rotation (tilt forward/back)
$cubeRotationY: 40deg; // Default Y-axis rotation (spin left/right)
nav {
  position: fixed;
  top: 50px;
  left: 100px;
  z-index: 2;

  // Create positioning context for absolute cube
  &::before {
    content: '';
    display: block;
    height: 0;
  }
}

// Cube trigger - collapsed state
.cube-trigger {
  width: 50px;
  height: 50px;
  position: absolute;
  top: 0;
  left: 0;
  cursor: pointer;
  perspective: 1000px;
  transition: all 0.6s ease;
  z-index: 2;

  &:hover {
    transform: scale(1.1);
  }

  &.hidden {
    opacity: 0;
    pointer-events: none;
    transform: scale(0);
  }
}

// Cube container for 3D transform context
.cube-container {
  width: 50px;
  height: 50px;
  position: relative;
  top: -7px;
  left: -3px;
  transform-style: preserve-3d;
  transform: rotateX($cubeRotationX) rotateY($cubeRotationY);

  &.hidden {
    opacity: 0;
    pointer-events: none;
  }
}

// Isometric cube for expansion/collapse animations
.isometric-cube {
  position: absolute;
  top: -5px;
  left: 20px;
  width: 50px;
  height: 60px;
  background: $primaryFaceColor;
  transform: skewY(-15deg);
  opacity: 0;
  pointer-events: none;

  // Top face using ::after
  &::after {
    content: "";
    position: absolute;
    top: -23px;
    left: 0;
    width: 100%;
    height: 23px;
    background: $primaryFaceColor;
    transform-origin: bottom;
    transform: skewX(60deg);
    transition: background 0.5s ease;
  }

  // Left face using ::before
  &::before {
    content: "";
    position: absolute;
    top: 0;
    left: -40px;
    width: 40px;
    height: 100%;
    background: $secondaryFaceColor;
    transform-origin: right;
    transform: skewY(30deg);
    transition: background 0.5s ease;
  }

  // Show during expansion/expanded states
  &.expanding-iso,
  &.expanded-iso,
  &.collapsing-iso {
    opacity: 1;
  }

  // Expand animations
  &.expanding-iso {
    animation: expandIsoWidth 0.5s ease 0.3s forwards, expandIsoHeight 0.5s ease 0.8s forwards;
  }

  // Stay expanded
  &.expanded-iso {
    width: 150px;
    height: 240px;
  }

  // Collapse animation
  &.collapsing-iso {
    animation: collapseIso 0.5s ease forwards;
  }
}

@keyframes expandIsoWidth {
  from { width: 50px; }
  to { width: 150px; }
}

@keyframes expandIsoHeight {
  from { height: 55px; }
  to { height: 240px; }
}

@keyframes collapseIso {
  from {
    width: 150px;
    height: 240px;
  }
  to {
    width: 50px;
    height: 55px;
  }
}

.cube-face {
  position: absolute;
  width: 60px;
  height: 60px;
  display: flex;
  justify-content: center;
  align-items: center;
  background: $primaryFaceColor;
  backface-visibility: hidden;

  .initials {
    font-family: 'Asimovian', sans-serif;
    font-size: 24px;
    color: $contentColor;
    font-weight: bold;
  }

  // Front face - simple flat face with initials only
  &.front {
    transform: translateZ($cubeDepth);
  }

  // Position additional faces in 3D space (no skew for these)
  &.back {
    transform: rotateY(180deg) translateZ($cubeDepth);
    background: $primaryFaceColor;
  }

  &.left {
    transform: rotateY(-90deg) translateZ($cubeDepth);
    background: $secondaryFaceColor;

    fa-icon {
      color: $contentColor;
      font-size: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
  }

  &.right {
    transform: rotateY(90deg) translateZ($cubeDepth);
    background: $secondaryFaceColor;

    fa-icon {
      color: $contentColor;
      font-size: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
  }

  &.top {
    transform: rotateX(90deg) translateZ($cubeDepth);
    background: $primaryFaceColor;
  }
}

// 3D cube is now only used for rotation when collapsed
// The isometric cube handles all expansion/collapse animations

.cube-trigger:hover .cube-face {
  background: $hoverColor;

  .initials {
    color: $contentHoverColor;
  }

  fa-icon {
    color: $contentHoverColor;
  }
}

// Menu list - initially hidden
ul {
  position: relative;
  z-index: 3;
  opacity: 0;
  transform: scale(1) skewY(-15deg);
  transform-origin: top left;
  transition: all 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
  pointer-events: none;
  margin-top: 14px;
  margin-left: 22px;

  &.show {
    opacity: 1;
    transform: scale(1) skewY(-15deg);
    pointer-events: all;
  }
}

li {
  position: relative;
  list-style: none;
  width: 150px;
  padding: 15px;
  background: $primaryFaceColor;
  z-index: calc(1*var(--i));
  transition: 0.5s;
}

li:hover{
  background: $hoverColor;
  transform: translateX(-50px);

  a span {
    color: $contentHoverColor;
  }

  a fa-icon {
    color: $contentHoverColor;
  }
}

li a{
  display: flex;
  align-items: center;
  text-decoration: none;

  fa-icon{
    color: $contentColor;
    display: flex;
    justify-content: center;
    align-items: center;
    position: absolute;
    top: 0;
    left: -40px;
    width: 40px;
    height: 100%;
    background: $secondaryFaceColor;
    transform-origin: right;
    transform: skewY(30deg);
    transition: 0.5s;
  }

  span{
    font-family: 'Asimovian', sans-serif;
    font-size: larger;
    color:$contentColor;
  }
}

li::after{
  content:"";
  position: absolute;
  top:-23px;
  left: 0;
  width: 100%;
  height: 23px;
  background: $primaryFaceColor;
  transform-origin: bottom;
  transform: skewX(60deg);
  transition: 0.5s;
}

li:hover::after{
  background:$hoverColor;
}

li:hover a fa-icon {
  background: $hoverColor;
}

// Collapse button
.collapse-btn {
  position: absolute;
  bottom: -60px;
  left: 0;
  width: 50px;
  height: 50px;
  background: $primaryFaceColor;
  display: flex;
  justify-content: center;
  align-items: center;
  cursor: pointer;
  transform: skewY(-15deg);
  transition: all 0.3s ease;
  animation: fadeInBtn 0.6s ease 1.9s both;

  fa-icon {
    color: $contentColor;
    font-size: 20px;
  }

  &:hover {
    background: $hoverColor;

    fa-icon {
      color: $contentHoverColor;
    }
  }
}

@keyframes fadeInBtn {
  from {
    opacity: 0;
    transform: skewY(-15deg) translateY(-20px);
  }
  to {
    opacity: 1;
    transform: skewY(-15deg) translateY(0);
  }
}

// Rotation animation for the cube when collapsed
@keyframes rotateCube {
  0% {
    transform: rotateX($cubeRotationX) rotateY($cubeRotationY);
  }
  100% {
    transform: rotateX($cubeRotationX) rotateY($cubeRotationY + 360deg);
  }
}

// Comment out the lines below to disable rotation
.cube-container.rotating {
  animation: rotateCube 4s linear infinite 0.2s;
}
//
// Pause rotation smoothly when at target angle during hover
.cube-container.rotating.paused {
  animation-play-state: paused;
}
